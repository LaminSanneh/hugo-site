<!doctype html><html lang=en><head><title>Laravel 11 and React 18 Login and Registration tutorial with React Redux Toolkit</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.838d4de71da17802fc5f13c5d46cbc081fe9b3f2d6519eb71f05bb2b4d908664.css integrity="sha256-g41N5x2heAL8XxPF1Gy8CB/ps/LWUZ63HwW7K02QhmQ="><meta property="og:url" content="http://laminsanneh.com/posts/laravel-11-react-18-login-registration-tutorial-react-redux-toolkit/"><meta property="og:site_name" content="Lamin Sanneh"><meta property="og:title" content="Laravel 11 and React 18 Login and Registration tutorial with React Redux Toolkit"><meta property="og:description" content="Introduction In this tutorial, we will be setting up an indepth tutorial guide of react.js and laravel 11 system for user authentication and registration. We will be using typescript on the react.js frontned, along with react redux toolkit, but do not worry as youc an follow along even if you only know javascript. React redux toolkit helps with state management. It might be overkill for a simple login registration app like this, but makes life very easy once the app codebase grows. Users will be able to register using an email as their username and password. After successful registration, they shall be able to login. We wil demonstrate the login mechanism by having a userpforile area/route in the frontend of the application which will be locked and only accessible to logged in. The frontend and backend will be on different domains, so the after logging in, we will provide the user with a token, which will be stored in localstorage of the browser. This will be send along in the header each request which requires authentication to get data back from the server. We will also need to setup cors so that our frontend domain can send requests to the backend domanin app."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-28T09:17:32+00:00"><meta property="article:modified_time" content="2024-05-28T09:17:32+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Laravel 11 and React 18 Login and Registration tutorial with React Redux Toolkit"><meta name=twitter:description content="Introduction In this tutorial, we will be setting up an indepth tutorial guide of react.js and laravel 11 system for user authentication and registration. We will be using typescript on the react.js frontned, along with react redux toolkit, but do not worry as youc an follow along even if you only know javascript. React redux toolkit helps with state management. It might be overkill for a simple login registration app like this, but makes life very easy once the app codebase grows. Users will be able to register using an email as their username and password. After successful registration, they shall be able to login. We wil demonstrate the login mechanism by having a userpforile area/route in the frontend of the application which will be locked and only accessible to logged in. The frontend and backend will be on different domains, so the after logging in, we will provide the user with a token, which will be stored in localstorage of the browser. This will be send along in the header each request which requires authentication to get data back from the server. We will also need to setup cors so that our frontend domain can send requests to the backend domanin app."><meta name=description content="Laravel 11 and React 18 Login and Registration tutorial with React Redux Toolkit"><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/>Lamin Sanneh</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#personal-projects>Recent Work</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>More</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/#education>Education</a></div></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/posts/2024-05-22-laravel-11-and-react-18-login-and-registration-tutorial-with-react-redux-toolkit.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/my-headshot-optimized_hu3337672960277328435.jpg alt="Author Image"><h5 class=author-name>Lamin Sanneh</h5><p class=text-muted>Tuesday, May 28, 2024 | 16 minutes</p></div><div class=title><h1>Laravel 11 and React 18 Login and Registration tutorial with React Redux Toolkit</h1></div><div class=tags><ul style=padding-left:0></ul></div><div class=post-content id=post-content><h2 id=introduction>Introduction</h2><p>In this tutorial, we will be setting up an indepth tutorial guide of react.js and laravel 11 system for user authentication and registration. We will be using typescript on the react.js frontned, along with react redux toolkit, but do not worry as youc an follow along even if you only know javascript. React redux toolkit helps with state management. It might be overkill for a simple login registration app like this, but makes life very easy once the app codebase grows. Users will be able to register using an email as their username and password. After successful registration, they shall be able to login. We wil demonstrate the login mechanism by having a userpforile area/route in the frontend of the application which will be locked and only accessible to logged in. The frontend and backend will be on different domains, so the after logging in, we will provide the user with a token, which will be stored in <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage target=_blank rel=noopener>localstorage</a> of the browser. This will be send along in the header each request which requires authentication to get data back from the server. We will also need to setup <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS target=_blank rel=noopener>cors</a> so that our frontend domain can send requests to the backend domanin app.</p><h2 id=project-structure>Project Structure</h2><p>Firstly, please clone the starter repositories here, one for the <a href=https://github.com/LaminSanneh/tutorial-repo-implementations/tree/main/base-projects/starter-kit-laravel target=_blank rel=noopener>laravel backend</a> and one for the <a href=https://github.com/LaminSanneh/tutorial-repo-implementations/tree/main/base-projects/starter-kit-react target=_blank rel=noopener>react frontend</a>. Put each of them in a separate folder. We already have all tthe required libraries added on the frontend inside <code>package.json</code> as listed below.</p><pre tabindex=0><code>- react-dom&#34;: &#34;^18.2.0&#34;,
- &#34;@reduxjs/toolkit&#34;: &#34;^2.2.1&#34;,
- &#34;axios&#34;: &#34;^1.6.7&#34;,
- &#34;react-redux&#34;: &#34;^9.1.0&#34;,
- &#34;react-router-dom&#34;: &#34;^6.22.3&#34;,
- &#34;redux&#34;: &#34;^5.0.1&#34;
</code></pre><p>I used <a href=https://vitejs.dev/ target=_blank rel=noopener>vite</a> to create the frontend project and <a href=https://getcomposer.org/ target=_blank rel=noopener>composer</a> to create the backend project in two seperate folders. An alternative would have been to host the react project directly inside the laravel project folder, hence having one domain for both frontend and backend, but we won;t be doibg that in this tutorial. Possibly, we may do it in another blog post.</p><h2 id=frontend>Frontend</h2><p>In the terminal, move inside the frontend folder using <code>cd your-frontend-folder</code> and run <code>npm install</code>. After successfully installing the libraries, run <code>npm run dev</code> to start the frontend server. Verify that the server is running at <code>http://localhost:5173/</code>.</p><h3 id=create-components-for-logincomponenttsx-and-registercomponenttsx-and-userprofilecomponenttsx>Create components for LoginComponent.tsx and RegisterComponent.tsx and UserProfileComponent.tsx</h3><p>Create a component in <code>src/components</code> as below:</p><p><code>src/components/LoginComponent.tsx</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./LoginComponent.css&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LoginComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Login</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login-form&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span>&gt;<span style=color:#a6e22e>Login</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>LoginComponent</span>;
</span></span></code></pre></div><p>with css file <code>src/components/LoginComponent.css</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>login-form</span> <span style=color:#f92672>label</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>block</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-bottom</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>login-form</span> <span style=color:#f92672>label</span> <span style=color:#f92672>input</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Create a component in <code>src/components/RegisterComponent.tsx</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./RegisterComponent.css&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RegisterComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Register</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;register-form&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span>&gt;<span style=color:#a6e22e>Register</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>RegisterComponent</span>;
</span></span></code></pre></div><p>with css file <code>src/components/RegisterComponent.css</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>register-form</span> <span style=color:#f92672>label</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>block</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-bottom</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>register-form</span> <span style=color:#f92672>input</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Create a component in <code>src/components/UserProfileComponent.tsx</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./UserProfileComponent.css&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserProfileComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Profile</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update-profile-form&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;phone&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;phone&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;phone&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>textarea</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span> &gt;&lt;/<span style=color:#f92672>textarea</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span>&gt;<span style=color:#a6e22e>Update</span> <span style=color:#a6e22e>Profie</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserProfileComponent</span>;
</span></span></code></pre></div><p>with css file <code>src/components/UserProfileComponent.css</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>update-profile-form</span> <span style=color:#f92672>label</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>block</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-bottom</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>update-profile-form</span> <span style=color:#f92672>input</span><span style=color:#f92672>,</span> .<span style=color:#a6e22e>update-profile-form</span> <span style=color:#f92672>textarea</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=add-routes-and-links-for-login-register-and-udateprofile>Add routes and links for Login, Register and UdateProfile</h3><p>Modify <code>App.tsx</code> like below to add the three links for the different components.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./App.css&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Link</span>, <span style=color:#a6e22e>Route</span>, <span style=color:#a6e22e>BrowserRouter</span>, <span style=color:#a6e22e>Routes</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-router-dom&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>LoginComponent</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./components/LoginComponent&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RegisterComponent</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./components/RegisterComponent&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UserProfileComponent</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./components/UserProfileComponent&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App() {</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>BrowserRouter</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;login&#34;</span>}&gt;<span style=color:#a6e22e>Login</span>&lt;/<span style=color:#f92672>Link</span>&gt;&lt;&gt; &lt;/&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;register&#34;</span>}&gt;<span style=color:#a6e22e>Register</span>&lt;/<span style=color:#f92672>Link</span>&gt;&lt;&gt; &lt;/&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;profile&#34;</span>}&gt;<span style=color:#a6e22e>Profile</span>&lt;/<span style=color:#f92672>Link</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>Routes</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>LoginComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/login&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>LoginComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/register&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>RegisterComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/profile&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>UserProfileComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>Routes</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>BrowserRouter</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>App</span>;
</span></span></code></pre></div><h3 id=create-reducers-for-handling-login-and-registration>Create reducers for handling login and registration</h3><p>Create a file in <code>src/store/slices/authReducer.ts</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createAsyncThunk</span>, <span style=color:#a6e22e>createSlice</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@reduxjs/toolkit&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>makeLoginUserRequest</span>, <span style=color:#a6e22e>makeRegisterUserRequest</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../../services/authService&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>LoginUserData</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>RegisterUserData</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>AuthState</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loading</span>: <span style=color:#66d9ef>boolean</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>token</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>isAuthenticated</span>: <span style=color:#66d9ef>boolean</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialState</span>: <span style=color:#66d9ef>AuthState</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loading</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>token</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>isAuthenticated</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loginUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createAsyncThunk</span>&lt;<span style=color:#f92672>string</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>LoginUserData</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;auth/loginUser&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>credentials</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>makeLoginUserRequest</span>(<span style=color:#a6e22e>credentials</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>registerUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createAsyncThunk</span>&lt;<span style=color:#f92672>void</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>RegisterUserData</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;auth/registerUser&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>credentials</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>makeRegisterUserRequest</span>(<span style=color:#a6e22e>credentials</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>authSlice</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlice</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;auth&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>initialState</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reducers</span><span style=color:#f92672>:</span> {},
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>extraReducers</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>builder</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>builder</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>loginUser</span>.<span style=color:#a6e22e>pending</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>loginUser</span>.<span style=color:#a6e22e>fulfilled</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>payload</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>loginUser</span>.<span style=color:#a6e22e>rejected</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;Failed to login user&#34;</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>registerUser</span>.<span style=color:#a6e22e>pending</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>registerUser</span>.<span style=color:#a6e22e>fulfilled</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>registerUser</span>.<span style=color:#a6e22e>rejected</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;Failed to register user&#34;</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addDefaultCase</span>(() <span style=color:#f92672>=&gt;</span> {});
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>authSlice</span>.<span style=color:#a6e22e>reducer</span>;
</span></span></code></pre></div><p>Then create the corresponding service file, <code>src/services/authService.ts</code> which will actually make the API HTTP calls to our laravel backend:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>axios</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;axios&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>LoginUserData</span>, <span style=color:#a6e22e>RegisterUserData</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store/slices/authReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>authHeader</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./authHeader&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>USER_TOKEN_KEY</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;USER_TOKEN_KEY&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>makeLoginUserRequest</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>credentials</span>: <span style=color:#66d9ef>LoginUserData</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>axios</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>`http://localhost:8000/api/login`</span>, <span style=color:#a6e22e>credentials</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>initializeToken</span>(<span style=color:#a6e22e>token</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#a6e22e>USER_TOKEN_KEY</span>, <span style=color:#a6e22e>token</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>token</span>;
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Failed to login user&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>makeRegisterUserRequest</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>credentials</span>: <span style=color:#66d9ef>RegisterUserData</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>axios</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>`http://localhost:8000/api/register`</span>, <span style=color:#a6e22e>credentials</span>))
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Failed to register user&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h3 id=create-reducers-for-handling-the-fetching-of-userdata-and-updating-profile>Create reducers for handling the fetching of userdata and updating profile</h3><p>Create a file in <code>src/store/slices/userReducer.ts</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createAsyncThunk</span>, <span style=color:#a6e22e>createSlice</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@reduxjs/toolkit&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>makeGetUserRequest</span>, <span style=color:#a6e22e>makeUpdatetUserRequest</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../../services/userService&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UpdateUserData</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>phone</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>phone</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserState</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>User</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loading</span>: <span style=color:#66d9ef>boolean</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialState</span>: <span style=color:#66d9ef>UserState</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loading</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>error</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createAsyncThunk</span>&lt;<span style=color:#f92672>User</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>void</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;auth/getUser&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>makeGetUserRequest</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createAsyncThunk</span>&lt;<span style=color:#f92672>User</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>UpdateUserData</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;auth/updateUser&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>userData</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>makeUpdatetUserRequest</span>(<span style=color:#a6e22e>userData</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>authSlice</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlice</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;auth&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>initialState</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reducers</span><span style=color:#f92672>:</span> {},
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>extraReducers</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>builder</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>builder</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>getUser</span>.<span style=color:#a6e22e>pending</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>getUser</span>.<span style=color:#a6e22e>fulfilled</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>payload</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>getUser</span>.<span style=color:#a6e22e>rejected</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;Failed to get user data&#34;</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>updateUser</span>.<span style=color:#a6e22e>pending</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>updateUser</span>.<span style=color:#a6e22e>fulfilled</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>payload</span>;
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>updateUser</span>.<span style=color:#a6e22e>rejected</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;Failed to update user&#34;</span>;
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>authSlice</span>.<span style=color:#a6e22e>reducer</span>;
</span></span></code></pre></div><p>Then create the corresponding service file, <code>src/services/userService.ts</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>axios</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;axios&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>UpdateUserData</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store/slices/userReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>authHeader</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./authHeader&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>makeGetUserRequest</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headers</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>headers</span>: <span style=color:#66d9ef>authHeader.getAuthHeader</span>()};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>axios</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>`http://localhost:8000/api/getUserData`</span>, <span style=color:#a6e22e>headers</span>)).<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Failed to get user data&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>makeUpdatetUserRequest</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>userData</span>: <span style=color:#66d9ef>UpdateUserData</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headers</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>headers</span>: <span style=color:#66d9ef>authHeader.getAuthHeader</span>()};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>axios</span>.<span style=color:#a6e22e>post</span>(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>`http://localhost:8000/api/updateUserProfile`</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>userData</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span>
</span></span><span style=display:flex><span>      )
</span></span><span style=display:flex><span>    ).<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Failed to register user&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Finally, create a file in <code>src/services/authHeader.ts</code>, where we shall have the logic for storing and retreving user token. The token gets stored after user login and gets retrieved and sent along with requests which need authetication.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>USER_TOKEN_KEY</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./authService&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>authHeader</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>accessToken</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>initializeToken</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>accessToken</span>: <span style=color:#66d9ef>string</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>accessToken</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>accessToken</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getAuthHeader</span><span style=color:#f92672>:</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>accessToken</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>USER_TOKEN_KEY</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>token</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>initializeToken</span>(<span style=color:#a6e22e>token</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>accessToken</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>Authorization</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Bearer &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>accessToken</span>};
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> {};
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>authHeader</span>;
</span></span></code></pre></div><p>Let&rsquo;s setup the redux react toolkit reducers which will combine and setup the slices above. Create a file in <code>src/store/index.ts</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>combineReducers</span>, <span style=color:#a6e22e>configureStore</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@reduxjs/toolkit&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>authReducer</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./slices/authReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>userReducer</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./slices/userReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useDispatch</span>, <span style=color:#a6e22e>useSelector</span>, <span style=color:#a6e22e>useStore</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-redux&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rootReducer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>combineReducers</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>auth</span>: <span style=color:#66d9ef>authReducer</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>userReducer</span>,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>store</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>configureStore</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reducer</span>: <span style=color:#66d9ef>rootReducer</span>,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>RootState</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ReturnType</span>&lt;<span style=color:#f92672>typeof</span> <span style=color:#a6e22e>store.getState</span>&gt;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AppDispatch</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>store</span>.<span style=color:#a6e22e>dispatch</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AppStore</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>store</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useAppDispatch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useDispatch</span>.<span style=color:#a6e22e>withTypes</span>&lt;<span style=color:#f92672>AppDispatch</span>&gt;();
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useAppSelector</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useSelector</span>.<span style=color:#a6e22e>withTypes</span>&lt;<span style=color:#f92672>RootState</span>&gt;();
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useAppStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useStore</span>.<span style=color:#a6e22e>withTypes</span>&lt;<span style=color:#f92672>AppStore</span>&gt;();
</span></span></code></pre></div><p>In the above, we are combining <code>userSlice</code> reducer and <code>authSlice</code> reducer into one which will be used to initialise the store. The line after <code>useAppDispatch</code>, <code>useAppSelector</code> and <code>useAppStore</code> are just some syntactic sugar setups so that typescript can easily recognize our entities. In short, <code>useAppDIspatch</code> is to be used in place of <code>useDispatch</code>, <code>useAppSelector</code> in place of <code>useSelector</code> and <code>useAppStore</code> in place of <code>useStore</code>. If we did not set that up, we would have to repeat a lot of code whenever we want to use those if we wanted to get code typescript hinting.</p><p>Lets look inside of <code>App.tsx</code>, modify it like below by adding the store to the main <code>App</code> component</p><p>Import our <code>store</code> and <code>Provider</code> at the top:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Provider</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-redux&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>store</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./store&#34;</span>;
</span></span></code></pre></div><p>Then wrap the remaining code inside the <code>Provider</code> like below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;<span style=color:#f92672>Provider</span> <span style=color:#a6e22e>store</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>store</span>}&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>BrowserRouter</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;login&#34;</span>}&gt;<span style=color:#a6e22e>Login</span>&lt;/<span style=color:#f92672>Link</span>&gt;&lt;&gt; &lt;/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;register&#34;</span>}&gt;<span style=color:#a6e22e>Register</span>&lt;/<span style=color:#f92672>Link</span>&gt;&lt;&gt; &lt;/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;profile&#34;</span>}&gt;<span style=color:#a6e22e>Profile</span>&lt;/<span style=color:#f92672>Link</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Routes</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>LoginComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/login&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>LoginComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/register&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>RegisterComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/profile&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>UserProfileComponent</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Routes</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>BrowserRouter</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>Provider</span>&gt;
</span></span></code></pre></div><h2 id=backend>Backend</h2><h3 id=install-backend-composer-packages-setup-database-environment-user-model-and-setup-cors>Install backend composer packages, setup database environment, user model and setup cors</h3><p>In the terminal run <code>cd backend-folder</code> and run <code>composer install</code></p><p>Then install the <code>Sanctum</code> package using <code>php artisan install:api</code>. This adds a new package, <code>"laravel/sanctum": "^4.0",</code> in <code>composer.json</code> inside the <code>require</code> key.</p><p>Answer no when asked if you want to run the database migration. Inside the user model <code>app/Models/User.php</code>, add the trait <code>Laravel\Sanctum\HasApiTokens</code>:</p><p>This package is used to issue user tokens upon login and is used to protect routes which need authentication to access.</p><p>After installing sanctum, run <code>php artisan config:publish cors</code> to publish the <code>cors.php</code> config file, which will create a new file in <code>config/cors.php</code>.</p><p>Create a file inside the same backend folder <code>.env</code> and modify the follwing variables:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env><span style=display:flex><span>DB_HOST<span style=color:#f92672>=</span>127.0.0.1
</span></span><span style=display:flex><span>DB_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3306</span>
</span></span><span style=display:flex><span>DB_DATABASE<span style=color:#f92672>=</span>name-of-database
</span></span><span style=display:flex><span>DB_USERNAME<span style=color:#f92672>=</span>database-server-username
</span></span><span style=display:flex><span>DB_PASSWORD<span style=color:#f92672>=</span>database-server-password
</span></span></code></pre></div><p>Make sure you have mysql installed, running. Also enure the database set in the variable <code>DB_DATABASE</code> has been created.</p><p>At the tip of the model import the class :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Laravel\Sanctum\HasApiTokens</span>;
</span></span></code></pre></div><p>and use it as seen below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>HasFactory</span>, <span style=color:#a6e22e>HasApiTokens</span>, <span style=color:#a6e22e>Notifiable</span>;
</span></span></code></pre></div><p>Modify the <code>$fillable</code> property and add these two columns so we can update those as well:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#e6db74>&#39;phone&#39;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;address&#39;</span>,
</span></span></code></pre></div><h3 id=create-routes-and-controllers-for-login-and-registration>Create Routes and Controllers for login and registration</h3><p>Inside the file <code>routes/api.php</code> add the following routes at the end:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>Route</span><span style=color:#f92672>::</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/login&#39;</span>, [<span style=color:#a6e22e>AuthController</span><span style=color:#f92672>::</span><span style=color:#a6e22e>class</span>, <span style=color:#e6db74>&#39;login&#39;</span>]);
</span></span><span style=display:flex><span><span style=color:#a6e22e>Route</span><span style=color:#f92672>::</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/register&#39;</span>, [<span style=color:#a6e22e>AuthController</span><span style=color:#f92672>::</span><span style=color:#a6e22e>class</span>, <span style=color:#e6db74>&#39;register&#39;</span>]);
</span></span></code></pre></div><p>and import the AuthController <code>use App\Http\Controllers\AuthController;</code></p><p>Now create the AuthController in <code>app/Http/Controllers/AuthController.php</code> with the content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>App\Http\Controllers</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Http\Request</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Support\Facades\Auth</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>App\Models\User</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Support\Facades\Hash</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthController</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Controller</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>login</span>(<span style=color:#a6e22e>Request</span> $request)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $credentials <span style=color:#f92672>=</span> $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>only</span>(<span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#e6db74>&#39;password&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Auth</span><span style=color:#f92672>::</span><span style=color:#a6e22e>attempt</span>($credentials)) {
</span></span><span style=display:flex><span>            $user <span style=color:#f92672>=</span> <span style=color:#a6e22e>Auth</span><span style=color:#f92672>::</span><span style=color:#a6e22e>user</span>();
</span></span><span style=display:flex><span>            $token <span style=color:#f92672>=</span> $user<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createToken</span>(<span style=color:#e6db74>&#39;auth_token&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>plainTextToken</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>json</span>($token);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>json</span>([<span style=color:#e6db74>&#39;message&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Unauthorized&#39;</span>], <span style=color:#ae81ff>401</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>register</span>(<span style=color:#a6e22e>Request</span> $request)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>validate</span>([
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;required|string|max:255&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;email&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;required|string|email|max:255|unique:users&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;required|string|min:8&#39;</span>,
</span></span><span style=display:flex><span>        ]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $user <span style=color:#f92672>=</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>([
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>name</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;email&#39;</span> <span style=color:#f92672>=&gt;</span> $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>email</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Hash</span><span style=color:#f92672>::</span><span style=color:#a6e22e>make</span>($request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>password</span>),
</span></span><span style=display:flex><span>        ]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>json</span>([<span style=color:#e6db74>&#39;message&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;User registered successfully&#39;</span>], <span style=color:#ae81ff>201</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=create-routes-and-controllers-for-updating-and-getting-user-data>Create Routes and Controllers for updating and getting user data</h3><p>Add these routes to <code>routes/api.php</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>Route</span><span style=color:#f92672>::</span><span style=color:#a6e22e>middleware</span>(<span style=color:#e6db74>&#39;auth:sanctum&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>group</span>(<span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Route</span><span style=color:#f92672>::</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;getUserData&#39;</span>, [<span style=color:#a6e22e>UserProfileController</span><span style=color:#f92672>::</span><span style=color:#a6e22e>class</span>, <span style=color:#e6db74>&#39;user&#39;</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Route</span><span style=color:#f92672>::</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;updateUserProfile&#39;</span>, [<span style=color:#a6e22e>UserProfileController</span><span style=color:#f92672>::</span><span style=color:#a6e22e>class</span>, <span style=color:#e6db74>&#39;updateProfile&#39;</span>]);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>This line <code>Route::middleware('auth:sanctum')->group(function () {</code> is meant to add a protection middleware group so that the routes are only accessibly by a logged in user who provides a valid token. This is made possible by the sanctum package we just installed.</p><p>Import the controller at the top <code>use App\Http\Controllers\UserProfileController;</code>:</p><p>Add a controller file in <code>app/Http/Controllers/UserProfileController.php</code> with the content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>App\Http\Controllers</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Http\Request</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Http\Response</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Support\Facades\Auth</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserProfileController</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Controller</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateProfile</span>(<span style=color:#a6e22e>Request</span> $request)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>validate</span>([
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;required|string|max:255&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;phone&#39;</span> <span style=color:#f92672>=&gt;</span> [<span style=color:#e6db74>&#39;required&#39;</span>, <span style=color:#e6db74>&#39;string&#39;</span>],
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;address&#39;</span> <span style=color:#f92672>=&gt;</span> [<span style=color:#e6db74>&#39;required&#39;</span>, <span style=color:#e6db74>&#39;string&#39;</span>],
</span></span><span style=display:flex><span>        ]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $userData <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;name&#39;</span> <span style=color:#f92672>=&gt;</span> $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>input</span>(<span style=color:#e6db74>&#39;name&#39;</span>),
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;phone&#39;</span> <span style=color:#f92672>=&gt;</span> $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>input</span>(<span style=color:#e6db74>&#39;phone&#39;</span>),
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;address&#39;</span> <span style=color:#f92672>=&gt;</span> $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>input</span>(<span style=color:#e6db74>&#39;address&#39;</span>)
</span></span><span style=display:flex><span>        ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $user <span style=color:#f92672>=</span> <span style=color:#a6e22e>Auth</span><span style=color:#f92672>::</span><span style=color:#a6e22e>user</span>();
</span></span><span style=display:flex><span>        $updated <span style=color:#f92672>=</span> $user<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>update</span>($userData);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>$updated) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>(<span style=color:#e6db74>&#39;Could not update profile&#39;</span>, <span style=color:#a6e22e>Response</span><span style=color:#f92672>::</span><span style=color:#a6e22e>HTTP_BAD_REQUEST</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>($user<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>only</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#e6db74>&#39;phone&#39;</span>, <span style=color:#e6db74>&#39;address&#39;</span>), <span style=color:#ae81ff>200</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>user</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Auth</span><span style=color:#f92672>::</span><span style=color:#a6e22e>check</span>()) {
</span></span><span style=display:flex><span>            $user <span style=color:#f92672>=</span> <span style=color:#a6e22e>Auth</span><span style=color:#f92672>::</span><span style=color:#a6e22e>user</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>($user<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>only</span>(<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#e6db74>&#39;phone&#39;</span>, <span style=color:#e6db74>&#39;address&#39;</span>), <span style=color:#ae81ff>200</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>json</span>([<span style=color:#e6db74>&#39;message&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Unauthorized&#39;</span>], <span style=color:#ae81ff>401</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=update-user-migration-file-to-add-extra-fields>Update user migration file to add extra fields</h3><p>Inside ther migration file <code>0001_01_01_000000_create_users_table.php</code></p><p>After the line <code>$table->string('email')->unique();</code></p><p>add the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>string</span>(<span style=color:#e6db74>&#39;phone&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>nullable</span>();
</span></span><span style=display:flex><span>$table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#39;address&#39;</span>);
</span></span></code></pre></div><p>In the backend terminal, run <code>php artisan migrate</code> to create the database tables and columns.</p><p>Finally, run php artisan serve to run the laravel php backend server Ensure you have atleast <code>php 8.2</code> installed on yur local system. To verify that the backend is running, visit <code>http://localhost:8000/</code> in your browser and yu shall see some beautiful UI with some links made by laravel authors.</p><h3 id=update-login-register-and-userprofile-components>Update login, register and userprofile components</h3><p>Lets move into the <code>RegisterComponent.tsx</code> and modify it as below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./RegisterComponent.css&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>registerUser</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store/slices/authReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useNavigate</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-router-dom&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useAppDispatch</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RegisterComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>setName</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>email</span>, <span style=color:#a6e22e>setEmail</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>password</span>, <span style=color:#a6e22e>setPassword</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dispatch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useAppDispatch</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>naivgate</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useNavigate</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSubmit</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>React.FormEvent</span>&lt;<span style=color:#f92672>HTMLFormElement</span>&gt;) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>registerUser</span>({ <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>email</span>, <span style=color:#a6e22e>password</span> }))
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>unwrap</span>()
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>naivgate</span>(<span style=color:#e6db74>&#34;/login&#34;</span>);
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>response</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>`Error occured </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onPropertyChage</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>callback</span>: <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setName</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setEmail</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setPassword</span>
</span></span><span style=display:flex><span>  ) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>React.ChangeEvent</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt;)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Register</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleSubmit</span>} <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;register-form&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setName</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;email&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setEmail</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;email&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;email&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setPassword</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span>&gt;<span style=color:#a6e22e>Register</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>RegisterComponent</span>;
</span></span></code></pre></div><p>What&rsquo;s changed is that we added handlers for when the form is sbmitted a nd when the user changes the input fields, we update the corresponding local component states. We also made a call to the reducer method registerUser so we make a backend call to the server.</p><p>Modify the <code>LoginComponent.tsx</code> like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./LoginComponent.css&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useAppDispatch</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>loginUser</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store/slices/authReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useNavigate</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-router-dom&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LoginComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>username</span>, <span style=color:#a6e22e>setUsername</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>password</span>, <span style=color:#a6e22e>setPassword</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dispatch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useAppDispatch</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>naivgate</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useNavigate</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSubmit</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>React.FormEvent</span>&lt;<span style=color:#f92672>HTMLFormElement</span>&gt;) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>loginUser</span>({<span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>username</span>, <span style=color:#a6e22e>password</span>})).<span style=color:#a6e22e>unwrap</span>().<span style=color:#a6e22e>then</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>naivgate</span>(<span style=color:#e6db74>&#34;/profile&#34;</span>);
</span></span><span style=display:flex><span>    }).<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>response</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>`Error occured </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onPropertyChage</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>callback</span>: <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setUsername</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setPassword</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>React.ChangeEvent</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt;)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Login</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleSubmit</span>} <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login-form&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setUsername</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setPassword</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span>&gt;<span style=color:#a6e22e>Login</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>LoginComponent</span>;
</span></span></code></pre></div><p>In here also, we are doing similar actions as we have done for the register component, but upon successfull login, we are redirected to the userprofile screen.</p><p>Let us now modify the <code>UserProfileComponent.tsx</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useEffect</span>, <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./UserProfileComponent.css&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useAppDispatch</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>getUser</span>, <span style=color:#a6e22e>updateUser</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store/slices/userReducer&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserProfileComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dispatch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useAppDispatch</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>setName</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>phone</span>, <span style=color:#a6e22e>setPhone</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>address</span>, <span style=color:#a6e22e>setAddress</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>getUser</span>())
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>unwrap</span>()
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>response</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setName</span>(<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setPhone</span>(<span style=color:#a6e22e>response</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>phone</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setAddress</span>(<span style=color:#a6e22e>response</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>address</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>response</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>`Error occured </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>dispatch</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSubmit</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>React.FormEvent</span>&lt;<span style=color:#f92672>HTMLFormElement</span>&gt;) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>preventDefault</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>updateUser</span>({<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>phone</span>, <span style=color:#a6e22e>address</span>})).<span style=color:#a6e22e>unwrap</span>().<span style=color:#a6e22e>then</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Updated successfuly&#39;</span>);
</span></span><span style=display:flex><span>    }).<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>response</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>`Error occured </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onPropertyChage</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>callback</span>: <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setName</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setPhone</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>setAddress</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>event</span>: <span style=color:#66d9ef>React.ChangeEvent</span>&lt;<span style=color:#f92672>HTMLInputElement</span><span style=color:#960050;background-color:#1e0010>|</span><span style=color:#a6e22e>HTMLTextAreaElement</span>&gt;)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Profile</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleSubmit</span>} <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update-profile-form&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>name</span>} <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setName</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;phone&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>phone</span>} <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setPhone</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;phone&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;phone&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>textarea</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>address</span>} <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onPropertyChage</span>(<span style=color:#a6e22e>setAddress</span>)} <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span>&gt;&lt;/<span style=color:#f92672>textarea</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>button</span>&gt;<span style=color:#a6e22e>Update</span> <span style=color:#a6e22e>Profie</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>form</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserProfileComponent</span>;
</span></span></code></pre></div><p>What happens here is that, we load the user data once, when the component is mounted, then we set the states for name, phone and address which are tied to the proper input fields. Once the data is returned from the backend, the field will become automatically pupulated. We can change the field values, and submit the data which will send them to teh backend to be updated for the user.</p><h2 id=add-feature-to-logout-users>Add feature to Logout users</h2><h3 id=backend-logout-logic>Backend logout Logic</h3><p>In the backend file <code>routes/api.php</code>, add the line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>Route</span><span style=color:#f92672>::</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/logout&#39;</span>, [<span style=color:#a6e22e>AuthController</span><span style=color:#f92672>::</span><span style=color:#a6e22e>class</span>, <span style=color:#e6db74>&#39;logout&#39;</span>]);
</span></span></code></pre></div><p>in the protected route group, so that only loggedin users can access it to logout and destroy the user session and delete the token.</p><p>Add the method in te <code>AuthController</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>logout</span>(<span style=color:#a6e22e>Request</span> $request)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    $request<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>user</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>currentAccessToken</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>delete</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>json</span>([<span style=color:#e6db74>&#39;message&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;Logged out successfully&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=frontend-logout-logic>Frontend logout Logic</h3><p>In the frontend, in <code>App.tsx</code> add this line to the list of routes</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;<span style=color:#f92672>Route</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/logout&#34;</span> <span style=color:#a6e22e>element</span><span style=color:#f92672>=</span>{&lt;<span style=color:#f92672>LogoutComponent</span> /&gt;} /&gt;
</span></span></code></pre></div><p>and add the following to the links section:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;&gt; &lt;/&gt;&lt;<span style=color:#f92672>Link</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;logout&#34;</span>}&gt;<span style=color:#a6e22e>Logout</span>&lt;/<span style=color:#f92672>Link</span>&gt;
</span></span></code></pre></div><p>and import the component:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>LogoutFLogoutComponentorm</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./components/LogoutComponent&#34;</span>;
</span></span></code></pre></div><p>Create a component for logout <code>src/components/LogoutComponent.tsx</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>logoutUser</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store/slices/authReducer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useAppDispatch</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;../store&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useNavigate</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-router-dom&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LogoutComponent</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dispatch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useAppDispatch</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navigate</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useNavigate</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleAcceptLogout</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>dispatch</span>(<span style=color:#a6e22e>logoutUser</span>())
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>unwrap</span>().<span style=color:#a6e22e>then</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>navigate</span>(<span style=color:#e6db74>&#34;/login&#34;</span>);
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>response</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>`Error occured </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleCancelLogout</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>navigate</span>(<span style=color:#e6db74>&#34;/profile&#34;</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Logout</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#a6e22e>Are</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>sure</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>want</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>logout</span><span style=color:#f92672>?</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleAcceptLogout</span>}&gt;<span style=color:#a6e22e>Yes</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>      &lt;&gt; &lt;/&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleCancelLogout</span>}&gt;<span style=color:#a6e22e>No</span>&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>LogoutComponent</span>;
</span></span></code></pre></div><p>The logou component show two buttons, one to confirm logout, which will send an api request. The second to cancel the logout and send us back to the profie screen.</p><p>Inside of <code>src/store/slices/authReducer.ts</code> add this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>logoutUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createAsyncThunk</span>&lt;<span style=color:#f92672>void</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>void</span>&gt;(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;auth/logoutUser&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>makeLogoutUserRequest</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>and add along the followibg cases to extra reducers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span>.<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>logoutUser</span>.<span style=color:#a6e22e>pending</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>logoutUser</span>.<span style=color:#a6e22e>fulfilled</span>, (<span style=color:#a6e22e>state</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>addCase</span>(<span style=color:#a6e22e>logoutUser</span>.<span style=color:#a6e22e>rejected</span>, (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>action</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;Failed to logout user&#34;</span>;
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Next, inside of <code>src/services/authService.ts</code>, add:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>makeLogoutUserRequest</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headers</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>headers</span>: <span style=color:#66d9ef>authHeader.getAuthHeader</span>()};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>axios</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>`http://localhost:8000/api/logout`</span>, <span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>headers</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>authHeader</span>.<span style=color:#a6e22e>clearToken</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>removeItem</span>(<span style=color:#a6e22e>USER_TOKEN_KEY</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Failed to loglogoutin user: service&#34;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>This sends a request to the laravel backend api. The backend deletes the user tokens. When that succeeds, the frontend clears the localstorage key which held the token, and the <code>authHeader</code> config file is cleared from holding a copy of that token. We are then redirected to the login page.</p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2flaminsanneh.com%2fposts%2flaravel-11-react-18-login-registration-tutorial-react-redux-toolkit%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=http%3a%2f%2flaminsanneh.com%2fposts%2flaravel-11-react-18-login-registration-tutorial-react-redux-toolkit%2f&text=Laravel%2011%20and%20React%2018%20Login%20and%20Registration%20tutorial%20with%20React%20Redux%20Toolkit&via=Lamin%20Sanneh" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=http%3a%2f%2flaminsanneh.com%2fposts%2flaravel-11-react-18-login-registration-tutorial-react-redux-toolkit%2f&title=Laravel%2011%20and%20React%2018%20Login%20and%20Registration%20tutorial%20with%20React%20Redux%20Toolkit" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=http%3a%2f%2flaminsanneh.com%2fposts%2flaravel-11-react-18-login-registration-tutorial-react-redux-toolkit%2f&title=Laravel%2011%20and%20React%2018%20Login%20and%20Registration%20tutorial%20with%20React%20Redux%20Toolkit" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Laravel%2011%20and%20React%2018%20Login%20and%20Registration%20tutorial%20with%20React%20Redux%20Toolkit http%3a%2f%2flaminsanneh.com%2fposts%2flaravel-11-react-18-login-registration-tutorial-react-redux-toolkit%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=Laravel%2011%20and%20React%2018%20Login%20and%20Registration%20tutorial%20with%20React%20Redux%20Toolkit&body=http%3a%2f%2flaminsanneh.com%2fposts%2flaravel-11-react-18-login-registration-tutorial-react-redux-toolkit%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/main/content/posts/2024-05-22-laravel-11-and-react-18-login-and-registration-tutorial-with-react-redux-toolkit.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#project-structure>Project Structure</a></li><li><a href=#frontend>Frontend</a><ul><li><a href=#create-components-for-logincomponenttsx-and-registercomponenttsx-and-userprofilecomponenttsx>Create components for LoginComponent.tsx and RegisterComponent.tsx and UserProfileComponent.tsx</a></li><li><a href=#add-routes-and-links-for-login-register-and-udateprofile>Add routes and links for Login, Register and UdateProfile</a></li><li><a href=#create-reducers-for-handling-login-and-registration>Create reducers for handling login and registration</a></li><li><a href=#create-reducers-for-handling-the-fetching-of-userdata-and-updating-profile>Create reducers for handling the fetching of userdata and updating profile</a></li></ul></li><li><a href=#backend>Backend</a><ul><li><a href=#install-backend-composer-packages-setup-database-environment-user-model-and-setup-cors>Install backend composer packages, setup database environment, user model and setup cors</a></li><li><a href=#create-routes-and-controllers-for-login-and-registration>Create Routes and Controllers for login and registration</a></li><li><a href=#create-routes-and-controllers-for-updating-and-getting-user-data>Create Routes and Controllers for updating and getting user data</a></li><li><a href=#update-user-migration-file-to-add-extra-fields>Update user migration file to add extra fields</a></li><li><a href=#update-login-register-and-userprofile-components>Update login, register and userprofile components</a></li></ul></li><li><a href=#add-feature-to-logout-users>Add feature to Logout users</a><ul><li><a href=#backend-logout-logic>Backend logout Logic</a></li><li><a href=#frontend-logout-logic>Frontend logout Logic</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#personal-projects>Recent Work</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#education>Education</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:lamin.evra@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>lamin.evra@gmail.com</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2024 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.100f2124055918d37ed55689f8b8cd9378a4ece97b585240e75bfd4894e0fe97.js integrity="sha256-EA8hJAVZGNN+1VaJ+LjNk3ik7Ol7WFJA51v9SJTg/pc=" defer></script></body></html>