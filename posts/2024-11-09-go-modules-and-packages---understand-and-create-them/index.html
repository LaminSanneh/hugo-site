<!doctype html><html lang=en><head><title>Go Local Modules and Packages - Understand How to Create and Use Them</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.838d4de71da17802fc5f13c5d46cbc081fe9b3f2d6519eb71f05bb2b4d908664.css integrity="sha256-g41N5x2heAL8XxPF1Gy8CB/ps/LWUZ63HwW7K02QhmQ="><meta property="og:url" content="http://laminsanneh.com/posts/2024-11-09-go-modules-and-packages---understand-and-create-them/"><meta property="og:site_name" content="Lamin Sanneh"><meta property="og:title" content="Go Local Modules and Packages - Understand How to Create and Use Them"><meta property="og:description" content="Introduction When building applications in Go, modularizing your code into separate modules and packages is essential for maintaining clean and reusable code. In this tutorial, we’ll walk through creating two local Go modules: restapi01/backend and restapi/maincaller. The backend module will serve as a basic HTTP server that outputs a simple HTML view, while the maincaller module will call functions from backend.
We shall look into:
Initializing Go modules and packages. Using go mod edit and go mod tidy to set up local imports without publishing packages. Testing the interaction between these modules and calling one from the other. Let’s get started!"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-09T14:11:14+00:00"><meta property="article:modified_time" content="2024-11-09T14:11:14+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Go Local Modules and Packages - Understand How to Create and Use Them"><meta name=twitter:description content="Introduction When building applications in Go, modularizing your code into separate modules and packages is essential for maintaining clean and reusable code. In this tutorial, we’ll walk through creating two local Go modules: restapi01/backend and restapi/maincaller. The backend module will serve as a basic HTTP server that outputs a simple HTML view, while the maincaller module will call functions from backend.
We shall look into:
Initializing Go modules and packages. Using go mod edit and go mod tidy to set up local imports without publishing packages. Testing the interaction between these modules and calling one from the other. Let’s get started!"><meta name=description content="Go Local Modules and Packages - Understand How to Create and Use Them"><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/>Lamin Sanneh</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#personal-projects>Recent Work</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>More</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/#education>Education</a></div></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/my-headshot-optimized_hu3337672960277328435.jpg alt="Author Image"><h5 class=author-name>Lamin Sanneh</h5><p class=text-muted>Saturday, November 9, 2024 | 3 minutes</p></div><div class=title><h1>Go Local Modules and Packages - Understand How to Create and Use Them</h1></div><div class=tags><ul style=padding-left:0></ul></div><div class=post-content id=post-content><h3 id=introduction>Introduction</h3><p>When building applications in Go, modularizing your code into separate modules and packages is essential for maintaining clean and reusable code. In this tutorial, we’ll walk through creating two local Go modules: <code>restapi01/backend</code> and <code>restapi/maincaller</code>. The <code>backend</code> module will serve as a basic HTTP server that outputs a simple HTML view, while the <code>maincaller</code> module will call functions from <code>backend</code>.</p><p>We shall look into:</p><ol><li>Initializing Go modules and packages.</li><li>Using <code>go mod edit</code> and <code>go mod tidy</code> to set up local imports without publishing packages.</li><li>Testing the interaction between these modules and calling one from the other.</li></ol><p>Let&rsquo;s get started!</p><h3 id=project-structure>Project Structure</h3><p>We&rsquo;ll set up the following structure:</p><pre tabindex=0><code>restapi/
├── backend/
│   ├── go.mod
│   ├── server.go
├── maincaller/
│   ├── go.mod
│   ├── main.go
</code></pre><p>Each module (<code>backend</code> and <code>maincaller</code>) will live in its own directory and act independently.</p><h3 id=step-1-initializing-the-backend-module>Step 1: Initializing the Backend Module</h3><p>The <code>backend</code> module will serve as an HTTP server. Let’s set up <code>restapi/backend</code> to listen for requests and return a simple HTML response.</p><ol><li><p><strong>Create the <code>backend</code> directory</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p restapi/backend
</span></span><span style=display:flex><span>cd restapi/backend
</span></span></code></pre></div></li><li><p><strong>Initialize a Go module</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go mod init restapi01/backend
</span></span></code></pre></div><p>Your <code>restapi/backend/go.mod</code> file should look like this with your current go version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module restapi01/backend
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go 1.20
</span></span></code></pre></div></li><li><p><strong>Write the <code>server.go</code> file</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// server.go
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>backend</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// StartServer starts a basic HTTP server
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>StartServer</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintln</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;&lt;h1&gt;Hello from Backend!&lt;/h1&gt;&#34;</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Starting server on :8080&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:8080&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here, <code>StartServer</code> is an exported function that starts an HTTP server on port <code>8080</code>. When accessed, it will return a simple HTML message.</p></li><li><p><strong>Initialize and tidy dependencies</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go mod tidy
</span></span></code></pre></div></li></ol><h3 id=step-2-initializing-the-maincaller-module>Step 2: Initializing the Maincaller Module</h3><p>Next, let&rsquo;s set up <code>restapi/maincaller</code>, which will call the <code>backend</code> module to start the server.</p><ol><li><p><strong>Create the <code>maincaller</code> directory</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p ../maincaller
</span></span><span style=display:flex><span>cd ../maincaller
</span></span></code></pre></div></li><li><p><strong>Initialize a Go module</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go mod init restapi/maincaller
</span></span></code></pre></div><p>Your <code>restapi/backend/go.mod</code> file should look like this with your current go version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module restapi01/maincaller
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go 1.20
</span></span></code></pre></div></li><li><p><strong>Write the <code>main.go</code> file</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// main.go
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;restapi01/backend&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Calling backend server...&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>backend</span>.<span style=color:#a6e22e>StartServer</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here, the <code>maincaller</code> package imports the <code>restapi01/backend</code> package and calls its <code>StartServer</code> function.</p></li><li><p><strong>Edit go.mod to Reference <code>backend</code> Locally</strong>:
Since <code>restapi01/backend</code> is a local module, we need to tell Go to look for it locally instead of remotely.</p><p>Run the following command to add a local replace directive:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go mod edit -replace<span style=color:#f92672>=</span>restapi01/backend<span style=color:#f92672>=</span>../backend
</span></span></code></pre></div><p>It should add a line like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>replace restapi01/backend <span style=color:#f92672>=</span>&gt; ../backend
</span></span></code></pre></div></li><li><p><strong>Use <code>go mod tidy</code></strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go mod tidy
</span></span></code></pre></div><p>This command will update your <code>go.mod</code> and <code>go.sum</code> files to ensure dependencies are managed correctly and the replace directive is respected. After running it, you <code>go.mod</code> file in the <code>maincaller</code> directory should have an extra line like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>require restapi01/backend v0.0.0-00010101000000-000000000000
</span></span></code></pre></div></li></ol><h3 id=step-3-run-the-application>Step 3: Run the Application</h3><p>Now, let’s run <code>maincaller</code> to see everything in action.</p><ol><li><p>Navigate to the <code>maincaller</code> directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd maincaller
</span></span></code></pre></div></li><li><p>Start the application:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go run main.go
</span></span></code></pre></div><p>You should see the output:</p><pre tabindex=0><code>Calling backend server...
Starting server on :8080
</code></pre></li><li><p><strong>Test the Server</strong>:
Open your browser and navigate to <code>http://localhost:8080</code>. You should see:</p><pre tabindex=0><code>Hello from Backend!
</code></pre></li></ol><h3 id=what-is-go-mod-edit--replace>What is <code>go mod edit -replace</code></h3><p>The <code>go mod edit -replace</code> directive tells Go to look for <code>restapi01/backend</code> in the local <code>../backend</code> directory rather than remotely. This is useful for testing and development, allowing us to manage dependencies without publishing modules to a repository.</p><h3 id=summary>Summary</h3><p>Using local modules and packages helps you organize code efficiently, especially in larger projects. With the replace directive, you gain the flexibility to structure projects without worrying about dependency management issues. Happy coding!</p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2flaminsanneh.com%2fposts%2f2024-11-09-go-modules-and-packages---understand-and-create-them%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=http%3a%2f%2flaminsanneh.com%2fposts%2f2024-11-09-go-modules-and-packages---understand-and-create-them%2f&text=Go%20Local%20Modules%20and%20Packages%20-%20Understand%20How%20to%20Create%20and%20Use%20Them&via=Lamin%20Sanneh" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=http%3a%2f%2flaminsanneh.com%2fposts%2f2024-11-09-go-modules-and-packages---understand-and-create-them%2f&title=Go%20Local%20Modules%20and%20Packages%20-%20Understand%20How%20to%20Create%20and%20Use%20Them" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=http%3a%2f%2flaminsanneh.com%2fposts%2f2024-11-09-go-modules-and-packages---understand-and-create-them%2f&title=Go%20Local%20Modules%20and%20Packages%20-%20Understand%20How%20to%20Create%20and%20Use%20Them" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=Go%20Local%20Modules%20and%20Packages%20-%20Understand%20How%20to%20Create%20and%20Use%20Them http%3a%2f%2flaminsanneh.com%2fposts%2f2024-11-09-go-modules-and-packages---understand-and-create-them%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=Go%20Local%20Modules%20and%20Packages%20-%20Understand%20How%20to%20Create%20and%20Use%20Them&body=http%3a%2f%2flaminsanneh.com%2fposts%2f2024-11-09-go-modules-and-packages---understand-and-create-them%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/main/content/posts/2024-11-09-go-modules-and-packages---understand-and-create-them.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#introduction>Introduction</a></li><li><a href=#project-structure>Project Structure</a></li><li><a href=#step-1-initializing-the-backend-module>Step 1: Initializing the Backend Module</a></li><li><a href=#step-2-initializing-the-maincaller-module>Step 2: Initializing the Maincaller Module</a></li><li><a href=#step-3-run-the-application>Step 3: Run the Application</a></li><li><a href=#what-is-go-mod-edit--replace>What is <code>go mod edit -replace</code></a></li><li><a href=#summary>Summary</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#personal-projects>Recent Work</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=http://laminsanneh.com/#education>Education</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:lamin.evra@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>lamin.evra@gmail.com</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2024 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.100f2124055918d37ed55689f8b8cd9378a4ece97b585240e75bfd4894e0fe97.js integrity="sha256-EA8hJAVZGNN+1VaJ+LjNk3ik7Ol7WFJA51v9SJTg/pc=" defer></script></body></html>